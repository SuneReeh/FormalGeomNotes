% -*- root: main.tex -*-

\usepackage{fullpage}
% \usepackage{savetrees}
\usepackage{amsmath,amssymb,amsfonts,amsthm,stmaryrd}
\usepackage{hyperref}
\usepackage[version warn]{sseqpages/sseqpages}
%\usepackage{stmaryrd}
%\usepackage{MnSymbol}

\usepackage{mathpazo} % math & rm
\linespread{1.05}        % Palatino needs more leading (space between lines)
\usepackage[scaled]{helvet} % ss
\usepackage{courier} % tt
\normalfont
\usepackage[T1]{fontenc}

\usepackage{tikz}
\usetikzlibrary{matrix,calc,3d,arrows,positioning}

\usepackage{tikz-cd}
\makeatletter
\tikzcdset{
    iso/.style="\cong"{#1},
    iso'/.style="\cong"{/utils/exec=\isop@which,#1},
    equiv/.style="\simeq"{#1},
    equiv'/.style="\simeq"{/utils/exec=\isop@which,#1},
    equal/.style={double distance=2pt,-}
}

\def\isop@getrow#1-#2-#3\@nil{#2}
\def\isop@getcolumn#1-#2-#3\@nil{#3}
\def\isop@which{
    \ifnum\@xp\isop@getrow\tikzcd@ar@start\@nil=\@xp\isop@getrow\tikzcd@ar@target\@nil\relax
        \pgfkeysalso{yscale=-1}
        \ifnum\@xp\isop@getcolumn\tikzcd@ar@start\@nil>\@xp\isop@getcolumn\tikzcd@ar@target\@nil\relax
            \pgfkeysalso{'}
        \fi
    \else
        \pgfkeysalso{'}
    \fi
}
\makeatother


\usepackage[textsize=tiny]{todonotes}
\usepackage[missing={See gitinfo2 instructions},dirty={(*)}]{gitinfo2}

\usepackage{pdflscape}
\usepackage{rotating}
\usepackage{mathtools}

% used for \bigast
\usepackage{relsize}

% make the bibliography appear in the table of contents
\usepackage[nottoc,numbib]{tocbibind}

\usepackage{cleveref}

% used to set custom chapter titles
\usepackage{tocloft,calc}

% this steals from http://tex.stackexchange.com/questions/36006/how-can-i-use-a-symbol-provided-by-a-package-without-changing-the-entire-mathema to import the "action" arrow
\DeclareFontFamily{U} {MnSymbolA}{}

\DeclareFontShape{U}{MnSymbolA}{m}{n}{
  <-6> MnSymbolA5
  <6-7> MnSymbolA6
  <7-8> MnSymbolA7
  <8-9> MnSymbolA8
  <9-10> MnSymbolA9
  <10-12> MnSymbolA10
  <12-> MnSymbolA12}{}
\DeclareFontShape{U}{MnSymbolA}{b}{n}{
  <-6> MnSymbolA-Bold5
  <6-7> MnSymbolA-Bold6
  <7-8> MnSymbolA-Bold7
  <8-9> MnSymbolA-Bold8
  <9-10> MnSymbolA-Bold9
  <10-12> MnSymbolA-Bold10
  <12-> MnSymbolA-Bold12}{}
\DeclareSymbolFont{MnSyA} {U} {MnSymbolA}{m}{n}
% 184 and 255 are both good options
\DeclareMathSymbol{\actson}{\mathrel}{MnSyA}{255}


%%% DONE WITH PACKAGES

\setlength{\marginparwidth}{1in-\marginparsep} % fullpage sets margins to 1in

\newcommand{\oweproof}[1]{\todo[color=red]{\textbf{You owe a proof of: } #1.}}
\newcommand{\citeme}[1]{\todo[color=green]{\textbf{Cite me: } #1.}}
\newcommand{\needproof}[1]{\todo[color=magenta]{\textbf{I need to already know: } #1.}}



\newcommand{\Z}{\mathbb Z}
\renewcommand{\S}{\mathbb S}
\newcommand{\F}{\mathbb F}
\newcommand{\G}{\widehat{\mathbb G}}
\newcommand{\barG}{\overline{\mathbb G}}
\newcommand{\R}{\mathbb R}
\newcommand{\RP}{\R\mathrm P}
\newcommand{\C}{\mathbb{C}}
\newcommand{\CP}{\C\mathrm P}
\newcommand{\A}{\widehat{\mathbb{A}}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\FH}{\textbf{FH}}
\newcommand{\CH}{\textbf{CH}}
\renewcommand{\L}{\mathcal{L}}
\renewcommand{\H}{\mathcal{H}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\W}{\mathbb W}
\newcommand{\m}{\mathfrak m}
\renewcommand{\O}{\mathcal O}
\renewcommand{\t}{\mathbf t}
\newcommand{\Gm}{\mathbb G_m}
\newcommand{\h}{\mathfrak h}
\newcommand{\D}{\mathbb D}
\renewcommand{\H}{\mathbb H}
\newcommand{\HP}{\H\mathrm P}

\newcommand{\<}{\langle}
\renewcommand{\>}{\rangle}
\newcommand{\sm}{\wedge}
\newcommand{\Susp}{\Sigma}
\newcommand{\Loops}{\Omega}
\renewcommand{\phi}{\varphi}
\renewcommand{\epsilon}{\varepsilon}
\newcommand{\eps}{\varepsilon}
\newcommand{\mmod}{/\!\!/}
\newcommand{\co}{\colon\thinspace}
\newcommand{\into}{\hookrightarrow}
\newcommand{\cotensor}{\square}
\newcommand{\from}{\leftarrow}
\newcommand{\onto}{\twoheadrightarrow}
\newcommand{\mhyphen}{\text{-}}

\renewcommand{\th}{\textsuperscript{th}}
\newcommand{\st}{\textsuperscript{st}}

\newcommand{\bigast}{\mathop{\vcenter{\hbox{$\Huge \mathlarger{\mathlarger{\ast}}$}}}}
% \newcommand{\bigcirc}{\mathop{\Huge \mathlarger{\mathlarger{\circ}}}}

\newcommand{\context}[1]{\mathcal{M}_{#1}}
\newcommand{\Ucontext}[1]{\mathcal{UM}_{#1}}
\newcommand{\CatOf}[1]{\mathsf{#1}}
\newcommand{\ps}[1]{\llbracket{#1}\rrbracket}
\newcommand{\moduli}[1]{\mathcal{M}_{\mathbf{#1}}}
\newcommand{\OS}[2]{\underline{\smash{#1}}_{#2}}
\newcommand{\InternalHom}[1]{\operatorname{\underline{\smash{\CatOf{#1}}}}}
\newcommand{\InternalAut}{\operatorname{\underline{\smash{\operatorname{Aut}}}}}
\newcommand{\InternalEnd}{\operatorname{\underline{\smash{\operatorname{End}}}}}
\newcommand{\sheaf}[1]{\mathcal{#1}}

\newcommand{\Spin}{\mathit{Spin}}
\newcommand{\String}{\mathit{String}}
\newcommand{\TMF}{\mathit{TMF}}
\newcommand{\Tmf}{\mathit{Tmf}}
\newcommand{\tmf}{\mathit{tmf}}
\newcommand{\TAF}{\mathit{TAF}}
\newcommand{\BP}{\mathit{BP}}
\newcommand{\MU}{\mathit{MU}}
\newcommand{\Tate}{\mathrm{Tate}}
\newcommand{\gl}{\mathit{gl}}
\newcommand{\GL}{\mathit{GL}}
\newcommand{\perf}{\mathrm{perf}}
\newcommand{\gpd}{\mathrm{gpd}}
\newcommand{\ptyp}{p\text{-}\mathrm{typ}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\ThomSheaf}[1]{\mathbb{L}(#1)}
\newcommand{\FGps}{\mathrm{FGps}}
\newcommand{\fin}{\mathrm{fin}}

\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Spf}{Spf}
\DeclareMathOperator{\Sch}{Sch}
\DeclareMathOperator*{\colim}{colim}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Div}{Div}
\DeclareMathOperator{\SDiv}{SDiv}
\DeclareMathOperator{\Sq}{Sq}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Def}{Def}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\hAut}{hAut}
\DeclareMathOperator{\Coord}{Coord}
\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\Cotor}{Cotor}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Weil}{Weil}
\DeclareMathOperator{\Alt}{Alt}
\DeclareMathOperator{\Tot}{Tot}
\DeclareMathOperator{\height}{ht}
\DeclareMathOperator{\Sub}{Sub}
\DeclareMathOperator{\Level}{Level}
\DeclareMathOperator{\Mono}{Mono}
\DeclareMathOperator{\Isog}{Isog}
\DeclareMathOperator{\Td}{Td}
\let\div\undefined\DeclareMathOperator{\div}{div}

\numberwithin{equation}{section}

\theoremstyle{plain}
\newtheorem{theorem}[equation]{Theorem}
\newtheorem{proposition}[equation]{Proposition}
\newtheorem{lemma}[equation]{Lemma}
\newtheorem{corollary}[equation]{Corollary}
\newtheorem{conjecture}[equation]{Conjecture}
\theoremstyle{definition}
\newtheorem{definition}[equation]{Definition}
\newtheorem{construction}[equation]{Construction}
\newtheorem{warning}[equation]{Important Warning}
\theoremstyle{remark}
\newtheorem{remark}[equation]{Remark}
\newtheorem{example}[equation]{Example}

\crefname{section}{lecture}{lectures} \Crefname{section}{Lecture}{Lectures}
\crefname{chapter}{case study}{case studies} \Crefname{chapter}{Case Study}{Case Studies}

\newcounter{whichdate}
\setcounter{whichdate}{0}
\newcommand{\thedate}{
    \ifcase\value{whichdate}
    \or % 1
        Jan 25%
    \or % 2
        Jan 27%
    \or % 3
        Jan 29%
    \or % 4
        Feb 1%
    \or % 5
        Feb 3%
    \or % 6%
        Feb 5%
    \or % 7%
        Feb 8%
    \or % 8%
        Feb 10%
    \or % 9%
        Feb 12%
    \or % 10%
        Feb 17%
    \or % 11%
        Feb 19%
    \or % 12%
        Feb 22%
    \or % 13%
        Feb 24%
    \or % 14%
        Feb 26%
    \or % 15%
        Feb 29%
    \or % 16%
        Mar 2%
    \or % 17%
        Mar 4%
    \or % 18%
        Mar 7%
    \or % 19%
        Mar 9%
    \or % 20%
        Mar 11%
    \or % 21%
        Mar 21%
    \or % 22%
        Mar 23%
    \or % 23%
        Mar 25%
    \or % 24%
        Mar 28%
    \or % 25%
        Apr 1%
    \or % 26%
        Apr 4%
    \or % 27%
        Apr 6%
    \or % 28%
        Apr 8%
    \or % 29%
        Apr 11%
    \or % 30%
        Apr 13%
    \or % 31%
        Apr 15%
    \or % 32%
        Apr 18%
    \or % 33%
        Apr 20%
    \or % 34%
        Apr 22%
    \or % 35%
        Apr 25%
    \or % 36%
        Apr 27%
    \else % >37%
        POST%
    \fi%
}

\newlength{\tocspacerlength}
\settowidth{\tocspacerlength}{Mar 999: }
\makeatletter
\let\oldsection\section
\newtoks\temptoks
\def\section#1{%
    \addtocounter{whichdate}{1}%
    \temptoks{#1}
    \edef\temp{
        \@nx\oldsection[\rlap{\thedate:}\hskip\tocspacerlength\the\temptoks]{\thedate: \the\temptoks}%
    }
    \temp
}
\makeatother
